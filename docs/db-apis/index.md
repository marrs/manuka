> [!NOTE]
> These documents were mostly generated by AI. If you're investigating a bug,
> consider the possibility that the code could have been written under false
> assumptions.

These documents are intended to help make decisions about how Manuka should go
about formatting statements and preparing data, by explaining what various
RDBMS implementations expect from client applications when executing prepared
statements and binding parameters.

Manuka will use plugins to format queries ready for use with db clients such as
the `pg` and `postgres` node modules for Postgresql, or the `mysql` module for
MySQL.  These modules may not support all the features of their target db, or
some may support features that others do not, or two clients may support the
same features but in different ways.

The Manuka interface and language need to be flexible enough to support all
(and future) target clients as seemlessly as possible - creating a unified
experience for programmers, while enabling them to use all the features at
their disposal.  To this end, an understanding of what the DBs themselves
provide is important.

## Key Differences between different databases

### Overview

| Feature | PostgreSQL | SQLite | MySQL |
|---------|-----------|---------|--------|
| **Placeholders** | `$1, $2, $3` (numbered) | `?`, `:name`, `@name`, `$name`, `?NNN` | `?` (positional only) |
| **Protocol** | Binary wire protocol (TCP) | C API (local file/memory) | Client-server (TCP/IP), Text or Binary |
| **Type System** | Strict typing with type OIDs | Dynamic typing (type affinity) | Strict typing |
| **Prepared Statements** | Per-connection, server-side cache | Per-database instance | Text: client-side, Binary: server-side |
| **NULL Handling** | Explicit in wire protocol | Same as other values | Standard SQL NULL |
| **Arrays** | Native support with `{}` syntax | No native array type | No native array type |
| **JSON** | Native json/jsonb types (OID-based) | JSON1 extension (functions) | Native JSON type (5.7.8+) |

### Bindings

| Database | Placeholder Syntax | Binding Style |
|----------|-------------------|---------------|
| **PostgreSQL** | `$1, $2, $3` only | Array (0-indexed in code, 1-indexed in SQL) |
| **SQLite** | `?`, `?NNN`, `:name`, `@name`, `$name` | Array, object, or varargs |
| **MySQL** | `?` only (positional) | Array (positional order) |

> [!NOTE]
> SQLite's `$name` is a **named parameter**, NOT the same as PostgreSQL's `$1`
> numbered parameter!
